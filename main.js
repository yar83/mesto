(()=>{"use strict";function t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var e=function e(n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"enableValidation",(function(){o._form.addEventListener("submit",(function(t){t.preventDefault()})),o._inputList.forEach((function(t){o._setInputEventListener(t)}))})),t(this,"_setInputEventListener",(function(t){t.addEventListener("input",(function(){o._checkInputValidity(t),o.toggleButtonState()}))})),t(this,"_checkInputValidity",(function(t){!1===t.validity.valid?o._showInputError(t):o._hideInputError(t)})),t(this,"_showInputError",(function(t){var e=t.getAttribute("id"),n=o._form.querySelector(".".concat(e,"-error"));t.classList.add(o._inputErrorClass),n.style.display="block",n.textContent=t.validationMessage})),t(this,"_hideInputError",(function(t){var e=t.getAttribute("id"),n=o._form.querySelector(".".concat(e,"-error"));t.classList.remove(o._inputErrorClass),n.style.display="none",n.textContent=""})),t(this,"resetValidation",(function(){o._inputList.forEach((function(t){o._hideInputError(t)}))})),t(this,"toggleButtonState",(function(){var t=o._form.querySelector(o._config.submitButtonSelector);o._hasInvalidInput()?(t.classList.add(o._config.inactiveButtonClass),t.setAttribute("disabled","")):(t.classList.remove(o._config.inactiveButtonClass),t.removeAttribute("disabled"))})),t(this,"_hasInvalidInput",(function(){return o._inputList.some((function(t){if(!1===t.validity.valid)return!0}))})),this._form=n,this._config=r,this._inputList=Array.from(n.querySelectorAll(r.inputSelector))};function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupItem=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,r;return e=t,(r=[{key:"open",value:function(){this._popupItem.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupItem.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popupItem.addEventListener("click",(function(e){e.target===t._popupItem&&t.close(),e.target.classList.contains("popup__close")&&t.close()}))}}])&&n(e.prototype,r),t}();function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}(f,t);var e,n,r,o,s=(r=f,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=l(r);if(o){var n=l(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return a(this,t)});function f(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),(e=s.call(this,t))._currentPopup=document.querySelector(t),e}return e=f,(n=[{key:"open",value:function(t,e){c(l(f.prototype),"open",this).call(this),this._currentPopup.querySelector(".fullszimg-popup__image").src=t,this._currentPopup.querySelector(".fullszimg-popup__title").textContent=e}}])&&i(e.prototype,n),f}(r);function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e,n){var r=e.data,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(){var t=this;this._initialArray.forEach((function(e){t._renderer(e)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&f(e.prototype,n),t}();function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var m=function(){function t(e){var n=e.name,r=e.about;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._aboutElement=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,about:this._aboutElement.textContent}}},{key:"setUserInfo",value:function(t){this._nameElement.textContent=t.name,this._aboutElement.textContent=t.about}}])&&_(e.prototype,n),t}();function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function v(t,e){return!e||"object"!==y(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function E(t){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(c,t);var e,n,r,o,i=(r=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(r);if(o){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return v(this,t)});function c(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(n=i.call(this,t))._form=document.querySelector(t).querySelector(".form__entity"),n._submitForm=e,n._inputList=n._form.querySelectorAll(".form__item"),n}return e=c,(n=[{key:"_getInputValues",value:function(){var t=this;return this._formValues={},this._inputList.forEach((function(e){t._formValues[e.name]=e.value})),this._formValues}},{key:"setEventListeners",value:function(){var t=this;h(E(c.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._submitForm(t._getInputValues()),t.close()}))}},{key:"close",value:function(){this._form.reset(),h(E(c.prototype),"close",this).call(this)}},{key:"setInitialFormData",value:function(t){this._inputList.forEach((function(e,n){e.value=Object.values(t)[n]}))}}])&&d(e.prototype,n),c}(r);function S(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var w=function t(e,n,r){var o=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),S(this,"_getTemplate",(function(){return document.querySelector(o._templateSelector).content.querySelector(".card").cloneNode(!0)})),S(this,"_setData",(function(){var t=o._cardElement.querySelector(".card__picture");o._cardElement.querySelector(".card__place").textContent=o._name,t.src=o._link,t.setAttribute("alt",o._altText)})),S(this,"_setEventListeners",(function(){o._cardElement.querySelector(".card__trashbin").addEventListener("click",(function(t){o._removeCard(t.target)})),o._cardElement.querySelector(".card__heart").addEventListener("click",(function(t){o._toggleLike(t.target)})),o._cardElement.querySelector(".card__picture").addEventListener("click",(function(t){o._handleCardClick({imgSrc:o._link,altText:o._altText})}))})),S(this,"_removeCard",(function(t){o._cardElement.remove(),o._cardElement=null})),S(this,"_toggleLike",(function(t){t.classList.toggle("card__heart_color_black")})),S(this,"getCard",(function(){return o._cardElement=o._getTemplate(),o._setData(),o._setEventListeners(),o._cardElement})),this._name=e.name,this._link=e.link,this._templateSelector=n,this._handleCardClick=r,this._altText="Изображение "+e.name},k=document.querySelector(".profile__button-add"),O=document.querySelector(".profile__button-edit"),L=document.querySelector(".form__entity_profile"),C=document.querySelector(".form__entity_add-card"),I={formSelector:".form__entity",fieldsetInputsSelector:".form__items",inputSelector:".form__item",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__item_type_error"},j=new e(L,I),q=new e(C,I),P=new s(".fullszimg-popup"),R=new p({data:[{name:"Полярный Урал",link:"https://i.ibb.co/jhSWGmy/polural.webp"},{name:"Карачаево-Черкесия",link:"https://i.ibb.co/SnSsfqJ/kchr.webp"},{name:"Костромская область",link:"https://i.ibb.co/z5Y2tsS/kostroma.webp"},{name:"Приполярный Урал",link:"https://i.ibb.co/5RCzt82/pripural.webp"},{name:"Крым",link:"https://i.ibb.co/jRT2cGm/krym.webp"},{name:"Остров Русский",link:"https://i.ibb.co/SwbrnPY/rusisl.webp"}],renderer:function(t){var e=B(t);R.addItem(e)}},".places__list"),x=new m({name:".profile__name",about:".profile__about"}),T=new g(".popup_edit-profile",(function(t){x.setUserInfo({name:Object.values(t)[0],about:Object.values(t)[1]})})),V=new g(".popup_add-card",(function(t){var e=B({name:Object.values(t)[0],link:Object.values(t)[1]});R.addItem(e)})),B=function(t){return new w(t,"#card-template",(function(t){P.open(t.imgSrc,t.altText)})).getCard()};P.setEventListeners(),T.setEventListeners(),V.setEventListeners(),O.addEventListener("click",(function(){T.open(),j.resetValidation();var t=x.getUserInfo();T.setInitialFormData(t)})),k.addEventListener("click",(function(){V.open(),q.resetValidation(),q.toggleButtonState()})),R.renderItems(),j.enableValidation(),q.enableValidation()})();