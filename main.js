(()=>{"use strict";function t(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function e(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,r(t,e,"get"))}function n(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,r(t,e,"set"),n),n}function r(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var o=new WeakMap,i=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,s=new WeakMap,l=new WeakMap,f=new WeakMap,p=new WeakMap,h=new WeakMap,d=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,m=new WeakMap,w=new WeakMap,_=new WeakSet,k=new WeakSet,g=new WeakSet,S=new WeakSet,E=new WeakSet,C=new WeakSet,O=new WeakSet,j=new WeakSet,P=new WeakSet,W=new WeakSet,L=function r(L,T,I,M){var x,A,B=this,D=M.handleCardClick,z=M.handleCardLike,V=M.handleCardDislike,F=M.handleTrashbinClick;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),W.add(this),P.add(this),j.add(this),O.add(this),C.add(this),E.add(this),S.add(this),g.add(this),k.add(this),_.add(this),o.set(this,{writable:!0,value:void 0}),i.set(this,{writable:!0,value:void 0}),a.set(this,{writable:!0,value:void 0}),c.set(this,{writable:!0,value:void 0}),u.set(this,{writable:!0,value:void 0}),s.set(this,{writable:!0,value:void 0}),l.set(this,{writable:!0,value:void 0}),f.set(this,{writable:!0,value:void 0}),p.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),d.set(this,{writable:!0,value:void 0}),v.set(this,{writable:!0,value:void 0}),y.set(this,{writable:!0,value:void 0}),b.set(this,{writable:!0,value:void 0}),m.set(this,{writable:!0,value:void 0}),w.set(this,{writable:!0,value:void 0}),A=function(){return n(B,v,t(B,_,q).call(B)),t(B,E,R).call(B),t(B,O,U).call(B),e(B,v)},(x="getCard")in this?Object.defineProperty(this,x,{value:A,enumerable:!0,configurable:!0,writable:!0}):this[x]=A,n(this,o,L.name),n(this,i,L.link),n(this,a,L._id),n(this,c,L.owner._id),n(this,u,I),n(this,l,D),n(this,f,z),n(this,p,V),n(this,h,F),n(this,d,"Изображение "+L.name),n(this,b,T._id),n(this,m,L.likes.length),n(this,w,L.likes)};function q(){return n(this,s,document.querySelector(e(this,u)).content.querySelector(".card").cloneNode(!0)),t(this,g,I).call(this)&&t(this,k,T).call(this),e(this,s)}function T(){e(this,s).querySelector(".card__trashbin").classList.add("card__trashbin_visible")}function I(){return e(this,b)===e(this,c)}function M(){var t=this;return e(this,w).some((function(n){return n._id===e(t,b)}))}function R(){var n=e(this,v).querySelector(".card__picture");e(this,v).querySelector(".card__place").textContent=e(this,o),t(this,C,x).call(this),t(this,S,M).call(this)&&t(this,P,A).call(this),n.src=e(this,i),n.setAttribute("alt",e(this,d))}function x(){e(this,v).querySelector(".card__likes-number").textContent=e(this,m)}function U(){var r=this;e(this,v).querySelector(".card__trashbin").addEventListener("click",(function(){e(r,h).call(r,e(r,a),e(r,v))})),e(this,v).querySelector(".card__heart").addEventListener("click",(function(){(t(r,S,M).call(r)?e(r,p).call(r,e(r,a)):e(r,f).call(r,e(r,a))).then((function(e){n(r,m,e.likes.length),t(r,C,x).call(r),n(r,w,e.likes),t(r,S,M).call(r)?t(r,P,A).call(r):t(r,W,B).call(r)}))})),e(this,v).querySelector(".card__picture").addEventListener("click",(function(t){e(r,l).call(r,{imgSrc:e(r,i),altText:e(r,d)})}))}function A(){e(this,v).querySelector(".card__heart").classList.add("card__heart_color_black")}function B(){e(this,v).querySelector(".card__heart").classList.remove("card__heart_color_black")}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var z=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,"enableValidation",(function(){r._form.addEventListener("submit",(function(t){t.preventDefault()})),r._inputList.forEach((function(t){r._setInputEventListener(t)}))})),D(this,"_setInputEventListener",(function(t){t.addEventListener("input",(function(){r._checkInputValidity(t),r.toggleButtonState()}))})),D(this,"_checkInputValidity",(function(t){!1===t.validity.valid?r._showInputError(t):r._hideInputError(t)})),D(this,"_showInputError",(function(t){var e=t.getAttribute("id"),n=r._form.querySelector(".".concat(e,"-error"));t.classList.add(r._inputErrorClass),n.style.display="block",n.textContent=t.validationMessage})),D(this,"_hideInputError",(function(t){var e=t.getAttribute("id"),n=r._form.querySelector(".".concat(e,"-error"));t.classList.remove(r._inputErrorClass),n.style.display="none",n.textContent=""})),D(this,"resetValidation",(function(){r._inputList.forEach((function(t){r._hideInputError(t)}))})),D(this,"toggleButtonState",(function(){var t=r._form.querySelector(r._config.submitButtonSelector);r._hasInvalidInput()?(t.classList.add(r._config.inactiveButtonClass),t.setAttribute("disabled","")):(t.classList.remove(r._config.inactiveButtonClass),t.removeAttribute("disabled"))})),D(this,"_hasInvalidInput",(function(){return r._inputList.some((function(t){if(!1===t.validity.valid)return!0}))})),this._form=e,this._config=n,this._inputList=Array.from(e.querySelectorAll(n.inputSelector))};function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function F(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var N=new WeakMap,J=function(){function t(e){var n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),N.set(this,{writable:!0,value:void 0}),n=this,r=N,o=document.querySelector(e),function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(n,F(n,r,"set"),o)}var e,n;return e=t,(n=[{key:"addItem",value:function(t){var e;(this,e=N,function(t,e){return e.get?e.get.call(t):e.value}(this,F(this,e,"get"))).prepend(t)}}])&&V(e.prototype,n),t}();function H(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var G=function(){function t(e){var n,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=void 0,(n="popupItem")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this.popupItem=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this.popupItem.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this.popupItem.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this.popupItem.addEventListener("click",(function(e){e.target===t.popupItem&&t.close(),e.target.classList.contains("popup__close")&&t.close()}))}}])&&H(e.prototype,n),t}();function K(t){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function X(t,e,n){return(X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Z(t,e){return!e||"object"!==K(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var tt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=$(r);if(o){var n=$(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Z(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._currentPopup=document.querySelector(t),e}return e=a,(n=[{key:"open",value:function(t,e){X($(a.prototype),"open",this).call(this),this._currentPopup.querySelector(".fullszimg-popup__image").src=t,this._currentPopup.querySelector(".fullszimg-popup__title").textContent=e}}])&&Q(e.prototype,n),a}(G);function et(t){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rt(t,e,n){return(rt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ct(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function it(t,e){return!e||"object"!==et(e)&&"function"!=typeof e?at(t):e}function at(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ct(t){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,lt(t,e,"get"))}function st(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,lt(t,e,"set"),n),n}function lt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var ft=new WeakMap,pt=new WeakMap,ht=new WeakMap,dt=new WeakMap,vt=new WeakSet,yt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ot(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=ct(r);if(o){var n=ct(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return it(this,t)});function a(t,e){var n,r=e.handleFormSubmit;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,t),vt.add(at(n)),ft.set(at(n),{writable:!0,value:void 0}),pt.set(at(n),{writable:!0,value:void 0}),ht.set(at(n),{writable:!0,value:void 0}),dt.set(at(n),{writable:!0,value:void 0}),st(at(n),ft,document.querySelector(t).querySelector(".form__entity")),st(at(n),pt,r),st(at(n),ht,ut(at(n),ft).querySelectorAll(".form__item")),n}return e=a,(n=[{key:"setEventListeners",value:function(){var t=this;rt(ct(a.prototype),"setEventListeners",this).call(this),ut(this,ft).addEventListener("submit",(function(e){e.preventDefault(),ut(t,pt).call(t,function(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}(t,vt,bt).call(t)),t.close()}))}},{key:"close",value:function(){ut(this,ft).reset(),rt(ct(a.prototype),"close",this).call(this)}},{key:"setInitialFormData",value:function(t){ut(this,ht).forEach((function(e,n){e.value=Object.values(t)[n]}))}}])&&nt(e.prototype,n),a}(G);function bt(){var t=this;return st(this,dt,{}),ut(this,ht).forEach((function(e){ut(t,dt)[e.name]=e.value})),ut(this,dt)}function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _t(t,e,n){return(_t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Et(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function kt(t,e){return(kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gt(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?St(t):e}function St(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Et(t){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,jt(t,e,"get"))}function Ot(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,jt(t,e,"set"),n),n}function jt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Pt=new WeakMap,Wt=new WeakMap,Lt=new WeakMap,qt=new WeakMap,Tt=new WeakMap,It=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kt(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Et(r);if(o){var n=Et(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return gt(this,t)});function a(t,e){var n,r=e.handleButtonClick,o=e.handleSuccessConfirm;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),n=i.call(this,t),Pt.set(St(n),{writable:!0,value:void 0}),Wt.set(St(n),{writable:!0,value:void 0}),Lt.set(St(n),{writable:!0,value:void 0}),qt.set(St(n),{writable:!0,value:void 0}),Tt.set(St(n),{writable:!0,value:void 0}),Ot(St(n),Pt,r),Ot(St(n),Wt,o),Ot(St(n),Lt,document.querySelector(t).querySelector(".delcard-popup__buttonyes")),n}return e=a,(n=[{key:"setEventListeners",value:function(){var t=this;_t(Et(a.prototype),"setEventListeners",this).call(this),Ct(this,Lt).addEventListener("click",(function(){Ct(t,Pt).call(t,Ct(t,qt)).then((function(){return Ct(t,Wt).call(t,Ct(t,Tt))})),_t(Et(a.prototype),"close",t).call(t)}))}},{key:"getCardData",value:function(t,e){Ot(this,qt,t),Ot(this,Tt,e)}}])&&wt(e.prototype,n),a}(G);function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Ut(t,e,"get"))}function xt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Ut(t,e,"set"),n),n}function Ut(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var At=new WeakMap,Bt=new WeakMap,Dt=new WeakMap,zt=function(){function t(e){var n=e.name,r=e.about,o=e.avatar;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),At.set(this,{writable:!0,value:void 0}),Bt.set(this,{writable:!0,value:void 0}),Dt.set(this,{writable:!0,value:void 0}),xt(this,At,document.querySelector(n)),xt(this,Bt,document.querySelector(r)),xt(this,Dt,document.querySelector(o))}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{name:Rt(this,At).textContent,about:Rt(this,Bt).textContent}}},{key:"setUserInfo",value:function(t){Rt(this,At).textContent=t.name,Rt(this,Bt).textContent=t.about}},{key:"setUserAvatar",value:function(t){Rt(this,Dt).src=t.avatar}}])&&Mt(e.prototype,n),t}();function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ft(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,Jt(t,e,"get"))}function Nt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Jt(t,e,"set"),n),n}function Jt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Ht=new WeakMap,Gt=new WeakMap,Kt=new WeakMap,Qt=new WeakMap,Xt=new WeakMap,Yt=function(){function t(e){var n=e.baseApiUrl,r=e.token;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ht.set(this,{writable:!0,value:void 0}),Gt.set(this,{writable:!0,value:void 0}),Kt.set(this,{writable:!0,value:void 0}),Qt.set(this,{writable:!0,value:void 0}),Xt.set(this,{writable:!0,value:void 0}),Nt(this,Ht,n),Nt(this,Gt,r),Nt(this,Kt,document.querySelector(".form__entity_profile").querySelector(".form__button")),Nt(this,Qt,document.querySelector(".form__entity_add-card").querySelector(".form__button")),Nt(this,Xt,document.querySelector(".form__entity_update-avatar").querySelector(".form__button"))}var e,n;return e=t,(n=[{key:"getInitialCards",value:function(){return fetch("".concat(Ft(this,Ht),"cards"),{headers:{authorization:Ft(this,Gt)}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"getUser",value:function(){return fetch("".concat(Ft(this,Ht),"users/me"),{headers:{authorization:Ft(this,Gt)}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"updateUserInfo",value:function(t){var e=this;return Ft(this,Kt).textContent="Сохранение...",fetch("".concat(Ft(this,Ht),"users/me"),{method:"PATCH",headers:{authorization:Ft(this,Gt),"Content-Type":"application/json"},body:JSON.stringify({name:t.name,about:t.about})}).then((function(t){return t.ok?(Ft(e,Kt).textContent="Сохранить",t.json()):(Ft(e,Kt).textContent="Сохранить",Promise.reject("Ошибка: ".concat(t.status)))}))}},{key:"updateUserAvatar",value:function(t){var e=this;return Ft(this,Xt).textContent="Сохранение...",fetch("".concat(Ft(this,Ht),"users/me/avatar"),{method:"PATCH",headers:{authorization:Ft(this,Gt),"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then((function(t){return t.ok?(Ft(e,Xt).textContent="Сохранить",t.json()):(Ft(e,Xt).textContent="Сохранить",Promise.reject("Ошибка: ".concat(t.status)))}))}},{key:"addNewCard",value:function(t,e){var n=this;return Ft(this,Qt).textContent="Сохранение...",fetch("".concat(Ft(this,Ht),"cards"),{method:"POST",headers:{authorization:Ft(this,Gt),"Content-Type":"application/json"},body:JSON.stringify({name:t,link:e})}).then((function(t){return t.ok?(Ft(n,Qt).textContent="Создать",t.json()):(Ft(n,Qt).textContent="Создать",Promise.reject("Ошибка: ".concat(t.status)))}))}},{key:"likeCard",value:function(t){return fetch("".concat(Ft(this,Ht),"cards/likes/").concat(t),{method:"PUT",headers:{authorization:Ft(this,Gt)}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"dislikeCard",value:function(t){return fetch("".concat(Ft(this,Ht),"cards/likes/").concat(t),{method:"DELETE",headers:{authorization:Ft(this,Gt)}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}},{key:"deleteCard",value:function(t){return console.log("".concat(Ft(this,Ht),"cards/").concat(t)),fetch("".concat(Ft(this,Ht),"cards/").concat(t),{method:"DELETE",headers:{authorization:Ft(this,Gt)}}).then((function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}))}}])&&Vt(e.prototype,n),t}(),Zt=document.querySelector(".profile__button-add"),$t=document.querySelector(".profile__button-edit"),te=document.querySelector(".profile__avatar-edit"),ee=document.querySelector(".form__entity_profile"),ne=document.querySelector(".form__entity_add-card"),re=document.querySelector(".form__entity_update-avatar"),oe={formSelector:".form__entity",fieldsetInputsSelector:".form__items",inputSelector:".form__item",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_inactive",inputErrorClass:"form__item_type_error"},ie={},ae=new z(ee,oe),ce=new z(ne,oe),ue=new z(re,oe),se=new tt(".fullszimg-popup"),le=new It(".delcard-popup",{handleButtonClick:function(t){return console.log(t+" this button clicked"),fe.deleteCard(t)},handleSuccessConfirm:function(t){t.remove(),t=null}});le.setEventListeners();var fe=new Yt({baseApiUrl:"https://mesto.nomoreparties.co/v1/cohort-25/",token:"edd40284-3f07-410f-b675-d459a40ce2f2"}),pe=function(t){ie.name=t.name,ie.about=t.about,ie.avatar=t.avatar,ie.cohort=t.cohort,ie._id=t._id};fe.getUser().then((function(t){pe(t)}));var he=new J(".places__list"),de=new zt({name:".profile__name",about:".profile__about",avatar:".profile__avatar-picture"}),ve=new yt(".popup_edit-profile",{handleFormSubmit:function(t){fe.updateUserInfo({name:Object.values(t)[0],about:Object.values(t)[1]}).then((function(t){de.setUserInfo(t),pe(t)}))}}),ye=new yt(".popup_add-card",{handleFormSubmit:function(t){fe.addNewCard(Object.values(t)[0],Object.values(t)[1]).then((function(t){var e=me(t);he.addItem(e)}))}}),be=new yt(".popup_update-avatar",{handleFormSubmit:function(t){fe.updateUserAvatar(Object.values(t)[0]).then((function(t){return de.setUserAvatar(t)}))}}),me=function(t){return new L(t,ie,"#card-template",{handleCardClick:function(t){se.open(t.imgSrc,t.altText)},handleCardLike:function(t){return fe.likeCard(t)},handleCardDislike:function(t){return fe.dislikeCard(t)},handleTrashbinClick:function(t,e){console.log("Clicked card with ID: ",t,"elem: ",e),le.open(),le.getCardData(t,e)}}).getCard()};fe.getInitialCards().then((function(t){t.forEach((function(t){return he.addItem(me(t))}))})),fe.getUser().then((function(t){de.setUserInfo(t),de.setUserAvatar(t)})),se.setEventListeners(),ve.setEventListeners(),ye.setEventListeners(),be.setEventListeners(),$t.addEventListener("click",(function(){ve.open(),ae.resetValidation();var t=de.getUserInfo();ve.setInitialFormData(t)})),Zt.addEventListener("click",(function(){ye.open(),ce.resetValidation(),ce.toggleButtonState()})),te.addEventListener("click",(function(){be.open(),ue.resetValidation(),ue.toggleButtonState()})),ae.enableValidation(),ce.enableValidation(),ue.enableValidation()})();